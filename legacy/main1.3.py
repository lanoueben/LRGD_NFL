# -*- coding: utf-8 -*-
"""
Created on Mon Nov 21 19:01:48 2022

@author: Ben Lanoue
This will be an improved version of main1.2.py
This will now randomize the rows the algorithm learns from for
each iterations
I will also make the algorithm do 4 games, not 3
"""




import numpy as np
import pandas as pd
import random as r
import math
import matplotlib.pyplot as plt
import os
import subprocess

gameNum = 4

def decWeek(week):
    week = week - 1
    if week == 0:
        week = 22
    return week

def getRow(master,team,week,year):
    rowNum = -1
    rows = len(master[28])
    
    for i in range(rows):
        if(master[0][i]==year and master[1][i]==week and master[2][i].lower() == team.lower()):
            return i
        #end if
    #end for
    
    return rowNum
    #end getRow
    
#will return -1 or 1 randomly, probs don't need it
def randSign():    
    if r.random() >= 0.5:
        return -1
    return 1


def calc_hx(master,theta,row):
    predY = master[0][row]
    predW = master[1][row]
    teamA = master[2][row]
    teamB = master[3][row]
    
    
    tempW = predW
    tempY = predY
    
    xColNum = len(master.columns) - 5
    
    thetaX = []
    
    selectedRow = []
    
    
    if tempW -1==0:
        tempW=decWeek(tempW)
        tempY=tempY-1
    else:
        tempW=decWeek(tempW)
        
    i=0
    
    while (i<gameNum):
        #This gets the games related to teamA, I will need to add
        #another search for defensive stats.
        tempRow = getRow(master,teamA,tempW,tempY)
        if(tempRow!= -1):
            i=i+1
            selectedRow.append(tempRow)
            
            #add the offensive stats of teamA
            for k in range(xColNum):
                thetaX.append(master[k+4][tempRow])
            #end for k
            
            #Add the defensive stats of teamA
            tempDRow = getRow(master,master[3][tempRow],tempW,tempY)
            selectedRow.append(tempDRow)
            for k in range(xColNum):
                thetaX.append(master[k+4][tempDRow])
            #end for k
                
            
        #end if
        
        if tempW -1==0:
            tempW=decWeek(tempW)
            tempY=tempY-1
        else:
            tempW=decWeek(tempW)
    
    #end while i
    
    #This adds the teamB stats, aka the opponent to teamB
    i=0
    tempW = predW
    tempY = predY
    
    if tempW -1==0:
        tempW=decWeek(tempW)
        tempY=tempY-1
    else:
        tempW=decWeek(tempW)
    
    while(i<gameNum):
        tempRow = getRow(master,teamB,tempW,tempY)
        if(tempRow!=-1):
            i=i+1
            selectedRow.append(tempRow)
            
            #add the offensive stats of TeamB
            for k in range(xColNum):
                thetaX.append(master[k+4][tempRow])
            #end for k 
            
            #Add the defensive stats of teamB
            tempDRow = getRow(master,master[3][tempRow],tempW,tempY)
            selectedRow.append(tempDRow)
            for k in range(xColNum):
                thetaX.append(master[k+4][tempDRow])
            #end for k
            
        #end if
        if tempW -1==0:
            tempW=decWeek(tempW)
            tempY=tempY-1
        else:
            tempW=decWeek(tempW)
    #end while i
    thetaX.append(1)
    
    '''
    After the 2 while i loops the lists thetaX and selectedRow
    should be populated
    thetaX should be size xColNum*gameNum*2*2+1
    We multiply gameNum by 2 twice, once for the teamB, and another
    to account for defensive stats for each teamA and teamB
    
    '''
    
    
    
    #calculate the hypothesis
    hx = 0
    for i in range(len(thetaX)):
        hx = hx+ (thetaX[i]*theta[i])
    hx = 1/(1+math.e**(-1*hx))
    
    
    
    return [hx, selectedRow]

def calc_hxNew(master,theta,week,year,teamA,teamB):
    
    predY = year
    predW = week

    tempW = predW
    tempY = predY
    
    xColNum = len(master.columns) - 5
    
    thetaX = []
    
    
    if tempW -1==0:
        tempW=decWeek(tempW)
        tempY=tempY-1
    else:
        tempW=decWeek(tempW)
        
    i=0
    
    while (i<gameNum):
        tempRow = getRow(master,teamA,tempW,tempY)
        if(tempRow!= -1):
            i=i+1
            
            #add the offensive stats of teamA
            for k in range(xColNum):
                thetaX.append(master[k+4][tempRow])
            #end for k
            
            #Add the defensive stats of teamA
            tempDRow = getRow(master,master[3][tempRow],tempW,tempY)
            for k in range(xColNum):
                thetaX.append(master[k+4][tempDRow])
            #end for k
            
        #end if
        
        if tempW -1==0:
            tempW=decWeek(tempW)
            tempY=tempY-1
        else:
            tempW=decWeek(tempW)
    
    #end while i
    
    i=0
    tempW = predW
    tempY = predY
    
    if tempW -1==0:
        tempW=decWeek(tempW)
        tempY=tempY-1
    else:
        tempW=decWeek(tempW)
    
    while(i<gameNum):
        tempRow = getRow(master,teamB,tempW,tempY)
        if(tempRow!=-1):
            i=i+1            
            #add the offensive stats of TeamB
            for k in range(xColNum):
                thetaX.append(master[k+4][tempRow])
            #end for k
            
            #Add the defensive stats of teamB
            tempDRow = getRow(master,master[3][tempRow],tempW,tempY)
            for k in range(xColNum):
                thetaX.append(master[k+4][tempDRow])
            #end for k
            
            
        #end if
        if tempW -1==0:
            tempW=decWeek(tempW)
            tempY=tempY-1
        else:
            tempW=decWeek(tempW)
    #end while i
    thetaX.append(1)
    
    
    #calculate the hypothesis
    hx = 0
    for i in range(len(thetaX)):
        hx = hx+ (thetaX[i]*theta[i])
    hx = 1/(1+math.e**(-1*hx))
    
    
    return hx

def cost(master,hypothesis, hypothesisRow):
    cost = 0

    for i in range(len(hypothesis)):
        cost = cost + (master[28][hypothesisRow[i]]*math.log(hypothesis[i])) + ((1-master[28][hypothesisRow[i]])*math.log(1-hypothesis[i]))
    #end for i
    cost = cost/(-len(hypothesis))
    
    return cost

def gradientDescent(master,alpha,T):
    
    print("iterations: ", T)
    print("Learning Rate: ", alpha)
    #First I will create thetas, I will make it so there are gameNum sets
    # of 2 teams game sets (Team A, and Team B)
    #First half of the thetas will be team stats for Team A in the past
    #3 games, and the second half the past 3 games for Team B
    
    xColNum = len(master.columns) - 5 #24 independed variables
    rowNum = len(master[28]) #master[28] is a series with win or loss indicated
   
    thetaLength = ((xColNum*gameNum*4))+1
    
    theta = []
    
    costValues = []
    xcostValues = []
    
    
    
    
    #This makes team A's thetas positive and team B's thetas negative,
    #as well as make the defensive stats of teamA be negative, and
    #make the defensive stats of teamB's  positive. This makes sense
    #bc if teamA's give huge amounts of defensive stats, then this should
    #decrease the chance to win.A defensive stat is just an opponents
    #offensive stats in a given game.
    
    #This will help avoid falling into a local min that would be wildy
    #inaccurate. Still possible that we'll fall into a local min, but
    #it will be deeper than having a complete random theta set
    
    '''
    for i in range(thetaLength):
        #teamA's stats
        if i<=thetaLength/2:
            
            polarity = 1
            if((i//xColNum) %2 == 1):
                polarity = -1
            theta.append(r.random() * polarity)
        #teamB's stats
        else:
            polarity = 1
            if((i//xColNum) %2 == 1):
                polarity = -1
            theta.append(r.random()*-1*polarity)
    #end for 
    
    '''
    '''
    #
    Iterations:
    100 @0.13
    400 @ 0.13
    1600 @ 0.13
    accuracy 0.8031746031746032
    Cost:0.45755096954884683
    theta = [0.26392593827582905, -0.6170205193222064, 0.056071033355212636, -0.6189589940529377, 0.39098694433487063, 0.35567779212231454, 0.5460944696102421, 0.8132201239549857, 0.40336533477804, 0.41073944905745474, 0.6416271680064943, -0.5554405102885507, -0.07319979003196911, 0.5618097108785342, 0.2973371554131446, -0.1858777353582198, 0.5969474924096724, -0.18411720167010687, -0.5082406402850095, 0.07848966036457579, -0.32556576994177233, -0.21576117334950795, -0.29881464167244487, 0.31098282727940363, 0.15092178677741983, -0.7533242463024241, -0.6821455252807527, -0.8302299819735286, -0.7620601889725749, 0.5091542089559604, 0.8018482265849609, -0.6776650817540886, 0.13555731233040652, 0.7012785878760119, 0.6385957920527854, -0.09790846282885518, -0.006313454032029853, -0.05825914463067925, -0.11470931557150969, 0.5693206938734313, 0.3435394256171559, -0.4415423167971181, 0.020900777296690994, 0.07325779986840786, -0.46295205175195175, 0.031143397409641966, -0.005588351392709751, 0.44598994380804874, 0.5687636730199777, -0.26381000091322504, 1.0506258228260061, 0.684075547413145, -0.24776256904733016, -0.12330796207369304, 0.24502348647884298, 0.05183954449616686, 0.21451319149706863, 1.009602367683515, 0.1691665908888508, 0.2216715402588213, 0.4002692765534849, -0.5046025039794027, 0.09841040385125296, -0.05019676725378252, 0.0601273662780061, 0.7024596888039136, 0.26983718185205885, 0.3018028286732694, -0.17488956017056423, -0.2972042613590594, -0.23698572559739625, -0.09967788771146241, -0.15120992644621695, -0.5056285853204333, -0.6691873911480938, 0.11000414429945689, -0.34539549555256194, -0.1314969253102912, 0.23322335418083706, 0.1234776499821331, 0.4626231072021094, -0.16059050170110034, -0.699338128292176, 0.4962542063770011, 0.14321286213912007, -0.34093726513233935, 0.1362258755030832, 1.0484981024279785, 0.008419465505242063, -0.4479036447990239, -0.0980235423046412, 0.06840920866187229, -0.36259944474260297, -0.12272781853549841, 0.9412605369684236, 0.4642718789478791, -0.14305655041208984, 0.1339884930015561, 0.6814426937565674, 0.40647923572250866, 0.09093690218021797, 0.8978669616530212, 0.8461365725006582, 0.5845660151950267, 0.32129315888612203, 0.5423806643882402, -0.2620788319472097, 0.6651051977236947, -0.3085390539912352, 0.8226114969391455, 0.6580343529221535, -0.5243921643391318, -0.030545446901173567, 0.07897241303085974, -0.10004479658089674, 0.24617528616123777, 0.06697508311579525, -0.7322609926802046, -0.31402773831734326, -0.8003230811994548, -0.4068988475664764, -0.019787686373087934, -1.0619068420469178, -0.9266375685258714, 0.10712530932054515, -0.4184665274902998, 0.25151851749384974, -0.17461967231707035, 0.11335738203904899, -0.2936756594294792, -0.6312527165642821, 0.04015149827835464, 0.07904131883032928, 0.481994514403868, 0.013304538854649413, -0.01965369665032862, -0.5719593188478828, 0.19278842137032132, 0.13388087520559178, 0.003622216419757004, 0.36712312608631975, 0.481286283738157, 0.8664096235395824, -0.952659751761704, -0.06246996971238153, -0.43913810469769293, 0.416738367696894, 0.8171332333608509, -0.3349450223092689, 0.22275390543913662, -0.3927628638126829, 0.2305858622910039, 0.7157807608022754, 0.06952627789375741, -0.26824776599894906, 0.7389732768649543, 0.8376263774833127, -1.5567048545799802, 0.42066367934775467, -0.38887394737864706, 0.20719726220267182, 0.3864390629725351, 0.11337532357349309, 0.5838605501069036, -0.5481842131302659, 0.051713558441560115, -0.18852801028637672, 0.047286582560400414, -0.5109833068322681, -0.053257185784156454, -0.32200855441836046, -0.2191436373511039, -0.08128047895311652, 0.09761294144858881, -0.13713966158336002, -0.10699158493766242, -0.08230065915056566, 0.33382301138439957, -0.2660912300828643, 0.1868192699807284, -0.0699777868699882, 0.15517113355893192, 0.033321088636209445, 0.3002651523910871, -0.41261709833065763, -0.062390720093140804, 0.3576823604880552, 0.17634051565788436, -0.015253161848337655, -0.36636794421111607, -0.01925293564462675, -0.3134288674177486, 0.7189173427830684, 0.29240116323195825, -0.1800514989990374, 0.6252452046024103, -0.6262601449276296, 0.017615943750760137, -0.3681483398012673, -0.9578886976979755, 0.040149089500985544, -0.3470813587902179, -0.7595024980558183, 0.14809117057858712, -0.25045231555981823, -0.3651940038183635, 0.05044292731020402, -0.3581122810018349, -0.526718619790031, -0.25014546213040667, 0.5984149575042251, -0.3201128416163438, 0.13847571793344643, 0.24635413661245917, 0.451173913131079, -0.052164675246018144, 0.2806772012406294, 0.5223591238508161, 0.2525180141562577, 1.0474707937779615, 0.2513529863050859, -0.2049530271933458, -0.5904171916140598, 0.8582109318185909, 0.144816062532944, -0.38905151716856035, -1.0236368814056565, -0.24736055477047617, -0.16171187222241015, 0.08125967952856102, 0.3055931245737086, -0.7621841012520763, -0.14813151981670955, 0.09810244123734196, -0.20536155041644286, 0.06924909575411348, 0.5282217386161353, -0.31046738649762984, 0.15135213326014743, -0.32666414022536877, -0.17617594021549268, 0.18291258469054733, -0.9875559555438339, -0.6455361781190209, -0.18765502593249378, -0.1557076283057335, -0.4336862007796389, -0.06146899859213506, -0.27647195477874886, -0.6203416088340942, -0.3052103685472971, 0.11011644465243253, -0.5209605201990479, 0.4832335518073172, -0.22775357183928027, 0.13155516653487742, -0.3388572263926381, -0.2905806865447063, -0.5969326932564404, 0.012996728175227026, 0.15956983314863368, 0.298040668453153, 0.6242190154040818, 0.23650633801861234, -0.27063040930732596, 0.3490680088995941, 0.6494955372878336, 0.2719563034849895, -0.09429320094466444, 0.3414612488469536, -0.19841625792165554, 0.1536661510578436, -0.3113704315279747, 0.052267520880232135, 0.8191834458767983, -0.6120351063539816, -0.03048261214087474, 0.06784957066964484, 0.10266578893947904, -1.041011296962161, -0.11743990183376907, 0.5672797953371194, -0.07351024306967634, 0.10821752467604102, -0.0274151209204059, 0.14707209562607476, -0.031562378773813786, -0.07232534455995428, 0.014643420340102069, 0.007226048197739856, -0.30300382381985896, -0.31381313361995444, -0.05427027229821508, -1.1317191976229914, -0.6245086839753915, -0.29240572253861813, 0.01015367054777785, -0.5553737129524775, 0.4682448306207448, -0.3943901689063676, -0.12719610357931949, -0.5939699103520699, -0.5836772153572045, 0.09566061705716386, 0.1797204117067899, -0.4411330931513787, 0.32274946632697965, 0.08233915296507757, 0.4824023919118807, 0.5431417965631548, 0.2396562860956507, 0.8633372366119317, 0.4849638554620045, 0.17315629326385362, 0.45389357133928715, 0.9216882554725151, 0.29404121034696923, -0.03442202354484919, -0.428085071765827, 0.06971890103482191, 0.13878388678972814, 0.37763960506473965, 0.3127667382082169, -0.30493389788786474, -0.2107990641315971, -0.9364281562466579, 0.4819622438981739, -0.18720752734767954, 0.8442771646303805, -0.5284615026398441, -0.0450602592975573, -0.1822735773204038, -0.7008745857534863, -0.35881312789346076, -0.5055913554478861, 0.9892053284257867, 0.21851343989000874, 0.3656489734322702, -0.2310210504553218, -0.8899014540097936, 0.15606846959388007, 0.0012934272067213386, 0.17700746725127972, -0.06108133154198232, -0.3394001018865765, 0.0044530405096235145, 0.3780290358346848, -0.2813712733120105, -0.8141616556364284, 1.349699154317243, -0.3405819270518474, 0.1890850366520073, -0.3173416872140968, 0.18644351278719576, -0.40532796737160615, -0.31567578071070984, -0.014039835011740961, 0.14222671425179098, 0.03383480477858944, -0.37359926037836877, -0.17092702688635303, 0.327365714241817, 0.19427703808098482, 0.334546149821441, 0.5028086711314431, -0.24576421247926789, 0.16559067992490362, 0.050702113284012064, -0.11621843774340647, -0.3336451993050727, 0.41384969718007625, -0.35720204160261504, 0.47693656018696234, -0.2639046907384292, 0.3302566589864183, -0.021561953578745977, 0.5155673841570335, 0.0815897018080753, -0.10865197395028922, -0.480741372378005, -0.1972093455913138, 0.4707256285590741, -0.14031711000700892, 0.14462763953933463, -0.014210097101880648]

    V2
    Iterations
    500 @0.7
    Accuracy 0.7987616099071208
    Cost: 0.4419030996489005
    theta=[0.4117424944203688, -0.8023545348858917, 0.24380131883340408, -1.014915743812513, 0.16591281489981108, 0.2566891843551199, 0.22528569734233206, 0.7275145809963682, -0.09110111610077119, 0.599855101996567, 0.7037057830439953, -0.25805507013921863, 0.09677639583883628, 0.3966864827955097, 0.005401777442914618, 0.2897230863963192, 0.42143635475736013, 0.16831744171814642, -0.05120537883983461, -0.20662708458281967, -0.0840623371974522, -0.42835980959974373, -0.42794957599521416, 0.2055348197216261, -0.11742931669147852, -0.6158863903465512, -0.30197948648864203, -0.8311686309987825, -0.13477475441145526, 0.05999401126171871, 0.6494941714106758, -0.7421057909651292, 0.12589472653915967, 0.7454685109765904, 0.949216032321226, 0.3227195971584968, 0.02312213908505429, 0.2707548265726855, -0.34428443791892493, 0.7152242070268607, -0.07265240990213313, 0.08119607906369355, 0.0015027949708116858, 0.12897220012345922, -0.48347746859616947, 0.3991741591004588, 0.12418575344076488, 0.303788497147474, 0.6011140815595143, 0.09926113813422184, 0.8448433433813932, 0.3797607106856956, 0.2329129485762905, -0.03773598623998112, 0.2124075962771895, -0.07808088485229457, 0.08399523930991899, 1.0314479088418922, -0.02781269574672457, -0.19291924367370192, 0.7773932749135595, -0.8203620032716856, 0.31056073141098217, 0.13128553587385966, 0.25647237285891505, 0.2095099269793793, 0.20700402652487712, 0.15636179168868913, 0.09955557117921064, -0.600340159909923, -0.28101866407121634, -0.3299964663599989, 0.0031355671652467253, -0.41720328233134163, -0.5676321596276938, 0.16330322706654052, 0.15936456119407483, -0.4543528159463318, 0.7303592996217212, 0.16887222143362307, 0.8476615128001197, 0.0008315822098042793, -0.6974248690053952, 0.09111698276763695, -0.03145436751085538, -0.204964049695354, 0.29949234809768166, 0.6652829655745113, -0.08802723383637881, -0.20621919781208906, 0.4127862385485169, -0.14446469132523818, 0.0697958961799733, -0.18120354701254693, 0.5301728653692938, 0.1759400191089988, -0.16316275388040324, 0.27416734941030985, 0.4104502631122824, 0.33851986980696674, 0.5083899178228252, 0.7344789979399402, 0.7972120422428426, 0.2494757321819668, 0.05073198971778894, 0.4046005613754887, 0.01365131598610389, 0.7574926342655047, 0.21425286787939085, 0.7009856257448893, 0.7057185370972976, -0.24700210332505357, -0.4456897743671015, 0.39423368080758686, -0.499773870368801, -0.01730038441571311, -0.2686218538020954, -0.5751266609219214, -0.011489903304999868, -0.7231939395407591, -0.8566071440699112, -0.1383346243918435, -0.8513644431385122, -0.8778436716112147, -0.030512850005566312, -0.20783472717995402, 0.2534558486057642, -0.4000895961641453, 0.27970899970223273, -0.46231082530362627, -0.708441945650417, 0.43700206914480694, 0.2691986241106279, 0.9252501413728343, -0.06104183981782797, -0.303369117168278, -0.2642603507835991, 0.22524311566063823, 0.3823545375620396, 0.18550577998424325, 0.8388059157742468, 0.49139625809922355, 0.9141033948133934, -0.8320683703531698, -0.4170053918749719, -0.14179688681097044, 0.6164317976010233, 0.9286530646213184, 0.47978744395827366, -0.03743523732353847, -0.45746223317614665, 0.11134581059757914, 0.718200530149998, 0.24004983194891538, -0.47938527899417543, 0.700466241856385, 0.7449434870163643, -1.5887199583414577, 0.3207627431521117, -0.32706416662582655, 0.02059065918831661, 0.2355859813202245, 0.9209888009800133, 0.2998906268444774, -0.14733179551572417, -0.16966517963613595, -0.0714422732232592, 0.21452243988709818, -0.39712411759672056, 0.07680852669734832, -0.01319045673876536, -0.2687162666007904, -0.11255847724676471, 0.26334526013951637, -0.32527865707781256, -0.0130770565766329, 0.23771112991030866, 0.20998484367237186, -0.2779486227152462, 0.22987095584980033, -0.4574418256339007, 0.16652271883583966, 0.1483209099935851, -0.1411033946853725, -0.3021700447600885, -0.2463357079940284, 0.3141573136382659, 0.859776205055607, 0.031169031871442595, -0.4287426680348755, 0.36158140944898665, -0.18035433956053223, 0.2804729682732508, 1.1536245214511427, -0.29923834500395646, 0.7331947867508446, -0.2901555445772982, -0.458902179879148, -0.3601618980039997, -0.9252379678488326, -0.22008272338379015, -0.33666050344213566, -0.907851444391395, 0.5628765660617512, -0.3643783057225861, -0.3628667467057539, -0.29732838091322966, 0.08059064739539419, -0.4279125174786336, -0.16032438732277965, 0.1732112536862101, 0.03997417766866685, 0.3692178569750804, 0.3470802640596173, 0.05104736699671884, -0.20300882050437777, -0.03723888327493436, 0.7587386342194692, 0.5283549942987581, 0.9480153829137963, 0.5856123988933095, -0.3227444360091094, -0.3784021187619881, 1.056780172379919, -0.17926159587401153, -0.20755175577792212, -1.0808148013247998, -0.3031300229238445, -0.35997258045366354, -0.29576989335172316, 0.0784145391814063, -0.4709881912401452, -0.1229910751682986, -0.057332516911379874, -0.24846539997007994, 0.0738586783053765, 0.5693848328703236, -0.4389944225725848, 0.03388177578486679, -0.315392385052975, -0.6945196943574548, -0.23283667162356675, -0.8183441681556849, -0.4753618288458282, -0.03300430977586454, -0.16043475415307967, 0.02055503706783368, -0.08431153454288186, 0.02641525821712562, -0.9867220547621421, -0.4148472343967361, -0.11600567932078779, -0.4889537940088724, 0.5067751008391074, 0.09618798655139285, -0.2743189750682062, -0.44075110977435644, -0.28893520531941463, -0.5611173496790487, 0.025707405424784665, -0.033486046249241404, 0.3473889780344756, 0.4636520443969396, 0.024214082666972364, 0.321560361795386, 0.3237659290465889, 0.6968937290342817, -0.20360155191602977, 0.042853706566390724, 0.28057187022727637, -0.6228925615198633, -0.1788019593180382, -0.685065371532047, 0.05331007999588972, 0.7340754886024659, -0.2524499112516652, -0.3080849445934078, 0.44950293488210885, -0.26117751996558153, -0.8168833404928371, 0.1905064500276385, 0.5205493241886501, -0.2603580612519955, -0.26396639641777847, 0.16676385221048856, 0.06644259830409141, -0.33929886559964617, -0.36752154587460834, -0.029974691408302202, -0.14607292528401822, -0.13526645815979085, -0.2905590278254474, -0.39406933631329955, -0.43937061187213206, -0.8571234717237395, -0.29297628275385024, 0.2018347271073435, -0.5809824969427034, 0.3516097023609726, -0.37929053042098326, -0.2696269448232643, -0.37158215065023964, -0.6498059929402351, -0.0596690318219907, 0.5104564176813724, -0.2388418494018332, 0.4848093499779665, -0.5946353517674462, -0.25950405376683794, 1.131202273893791, -0.019089844457951213, 0.9256471730328871, 0.945636952794195, -0.12274843700700099, 0.613410059824667, 0.7420376485187673, -0.1990620778837061, 0.07291408150391201, -0.143925188472999, -0.0787404467875039, -0.06609708482524439, 0.25180019603562537, 0.6491732130453601, -0.4187393821135842, 0.1120319001436807, -0.9302291750006348, 0.24262150784171607, -0.08713092572880535, 0.47216633153572973, -0.48439873015398616, 0.07969327318319348, -0.11375588068961791, -0.5287646463610021, -0.49444240750550866, -1.285790188650585, 1.0035111213020873, 0.1321404518911917, 0.6273078545708439, -0.448448382473145, -0.9788391746771272, 0.41815919661724404, -0.07742360670402872, 0.3722557963522156, -0.12807871842506124, -0.34820675482370606, 0.0702783362687407, 0.23263673565554868, -0.8458908950118416, -0.7075459116100244, 1.5641735791527578, -0.20895592266593052, 0.04667881999800416, -0.3488806208181528, -0.024400857272013826, -0.5927588765069005, -0.41769937231410914, 0.1954592186951848, -0.03382087762500634, 0.06591708783293854, -0.3366805351176126, 0.06437851007409416, 0.29629427848103745, 0.17068881077494918, 0.44881696063656473, 0.19195331726390727, 0.24822899996686082, 0.15440786737884232, 0.011752649607526677, 0.014296695817229798, 0.16133421628661707, 0.14761107262116926, -0.09791456310674045, 0.6151751621561788, -0.4128307245338067, 0.12029881979791279, -0.15632399699163194, 0.6612836922787753, -0.18147431773620704, -0.4757935360391984, -0.68331134106709, -0.062232574619107264, 0.263693333535022, -0.16569040093928922, 0.10389344921203293, -0.005952556001296896]
    
    
    V3
    Iterations:
    1500 @ 1.1 -> x0.7
    1000 @ 1.1 -> x0.7
    Accuracy: 0.8768768768768769
    Cost: 0.3122226765067844
    theta= [0.47890034532457365, -2.7046581918999926, 1.82518262369292, -1.168262363567686, 1.5655699585475944, -0.6933607425259041, 0.7939623413435288, 1.4233813260677575, -0.08988702941879986, 0.8545100623191307, -0.30019989200859953, -1.9062238512284164, 0.4359263118510868, 0.9121594089584439, 0.45487222996948906, -0.4156496065961445, 0.5030248447915745, 0.2975619427457812, -1.1578933855704732, 0.5394043305132048, -0.3784091204427164, -0.4224036531131926, -0.22258362632054135, 1.1931962589330416, 0.23942660294773604, -0.8968619534839789, -1.4142933431300033, -1.661953564148633, -1.4526509145322066, 1.0883045050368934, 0.2885879919960301, -2.352677613690816, 0.43964829738708544, 0.9330703288721756, 1.909831756446659, 1.392800179424641, 1.1624714472380158, 0.37029291592851277, -0.3267236903004829, 0.830841148754363, 0.8482505205725182, -0.20671833722870445, 1.3726256129760892, -0.3317044421750065, -1.3105463246508158, 0.6947743574059602, -0.5694400785085952, 1.1433961681563163, 2.3576746911338593, 0.062092393510436564, 1.5844752509697722, 0.3919133586581019, -0.1699147790319137, 0.6506829303557222, 0.018345610050947425, -0.3761319495890433, -0.3217145691938608, 1.800450675369802, 0.32065878995611113, -0.6826436703818599, 0.9589112002417752, -2.120986708402246, 0.6531731247936919, 0.6046218698344883, -0.15336753663005398, 0.9359264811074978, 1.1052740563319463, 0.43374309190212584, 0.40817115369557233, -0.8304007808462172, -1.46105703079823, 0.16362037012416145, -0.36036208411394016, -1.461444937140983, -1.4036486292517547, 0.6834293662539771, -0.5731763246208735, -0.8994991150316368, 0.22251582423810812, 0.29047542206792604, 1.1729958906638098, -0.5182741358123858, -0.6933953369674749, 1.942144200096966, 0.4805924128681666, -0.3995917889978795, -0.19746442886402607, 1.7427117613881793, -0.6987530419708549, -0.23188797691544494, 0.1897761455186429, 0.40752445695768313, -0.443122521226026, 0.32005350129366844, 2.5643791788287484, 1.0621261789869776, -0.02957348071623284, 0.2949465366136897, 0.7612111739142744, 0.00791902075873841, 0.29414558056351875, 1.8072407917529412, 1.228083977094744, -0.020655167704308044, -0.1403685924453047, 0.6800942865662541, -0.9251178503232577, 1.1801947734545872, 0.241678846139745, 2.0251688659033764, 0.261282297112151, -0.6132617168284464, -2.063896344900456, 2.064013380927511, -1.2524799022680693, 1.6426881625192367, 0.5122823709646928, -2.209421545195469, 0.0021216174697608822, -2.3122268503111423, -2.038604076014684, 1.1681196123695174, -1.3468428489182358, -1.3585436954718297, 1.6443978802273822, -2.301596938226698, 0.14597284417991133, -0.29862470327365354, 0.5568461484622917, -0.26022265477019885, -1.4837943037985288, 2.5965502331249546, -0.8195887433051324, 1.604875115664083, -0.8548232457138195, -0.5755466433775626, -1.4253461546782469, 1.9001351850190178, 1.1227585046682886, -0.4015029268897052, 1.7121032802023064, 0.9947437495450984, 1.8536751474443858, -2.3378839226051182, -0.11055552915066498, -1.9201145079287354, 1.2079456128402772, 2.054309763692186, -0.12939306671574538, 0.8451864663105176, -1.5244701571667136, -0.20234688102755702, 0.5375207953801038, 1.909989033261806, -1.621916693701277, 1.2599263244860706, 1.9359466642743124, -3.7427476085922344, 0.8057991953973579, -0.23881042040963396, 0.05425957307668906, 0.2797450080207329, 1.0626999267834227, 0.05015521118140882, -1.3104832411068748, 0.2872722545866599, 0.13482196669840968, 0.8618800259676962, 0.2729693973967175, -0.12025352651749195, 0.9433806582368156, -0.6927502996900825, 0.4466699190438796, -0.5330378229011573, -0.6535830346049343, -0.06938187617429789, 0.6232247192552623, 0.08633683540055224, 0.017976518384606403, 1.1645197423734899, -2.4293354414557715, 1.300873509184219, -0.336238215783643, -0.21772640973778076, -0.5910378505174916, -0.3882872102805277, 0.37484543104408363, 1.0861278704027824, 0.5760358985954217, -0.7710236347715518, 0.4112961848038691, 0.4069902889490662, -0.5320329352646767, 3.0042954005709555, -1.657467903016368, 1.1082648438554599, -1.4054736973539514, 0.7847244196487798, -0.5407506657167692, -1.3885737129966944, 0.1876889861051462, -1.031755635844814, 0.20929080907158454, 1.9622874761662386, -0.8296463516055677, -0.8405905786098755, -0.5176262248566633, 0.38840328311461475, -0.6850928643630841, -0.015270820902402924, 0.8170972677225667, -0.7460390977138263, 0.18316407610440014, 0.1867810807789435, 0.1537375567274438, -1.0076978883524093, -0.49113640253878205, 0.5160062255760496, 1.4044351584174428, 1.6439788742785537, 1.4914938704248353, -1.3359054723175068, -0.3119281673366981, 2.70904480938574, -0.5093538134090704, -0.9355779128510391, -1.9854019069157625, -1.4847156248484885, -0.9735353187313844, -0.485435416764754, 0.4001189357375711, -0.7561666064896299, -0.591198659099981, -0.10433173082599331, -1.3928733595176943, 0.5273542495925048, 1.086280121366391, -0.38713473681510907, 0.6026325295523663, -0.8648726803547054, -2.3138504614464956, -0.02636937038736954, -1.6957403421440556, -0.14676890811528495, 0.41849491337189, -0.42430895503296767, -0.16571769104321696, 0.467022401866003, 0.26561511281206346, -1.7617237958554215, -0.34602539553989387, 0.5371129657062034, -0.8682433932826579, 2.1068243391540995, -0.7114805954349733, -0.6151165816617503, 0.2119922630806947, -1.1587445341538443, -1.2376309185435128, -0.3673786417537331, -0.47204476715973664, 0.6028128894405435, 0.9513449553536328, -0.15900215521839514, 0.20499819718471698, 1.7369101058603384, 1.5251063225743544, -0.5426935728032164, 0.36221569522743047, 1.3362791614277896, -0.32915817813343345, -0.12901748088998288, -1.0949762007696688, 0.0933357843206202, 0.9393210856710678, -1.9402447249609818, -0.6886809661606415, 0.45041532382925975, 0.2134639661332103, -1.7110281346818197, 0.9108029108233797, 0.12451233594646857, -0.3239757162400374, -0.24788097993867625, 0.6611755321744159, -0.5694771819585915, -2.8080026793845545, -1.0054067888737708, 0.07869292915519421, -0.45705737766780724, -0.5543519655376564, -0.1642972032769097, -0.534533180867031, -1.8455648666422562, -1.3743917963026429, 0.0902825404394035, 0.3078273309879114, -0.6659771286315004, 0.9026612870302291, -1.1494884541633206, -0.410257943057999, -2.0605134307951163, -0.250239160953536, 0.4831243533656999, 1.7620631580277986, -1.708048716254989, 1.2613874238366705, -1.6140628651039535, -0.6652186762367313, 2.2543957443874105, 0.20770367251816474, 2.365833529792192, 2.0514082624491543, -1.1568549630142755, 1.2472734857195398, 1.2280979400407732, -1.7459005221937003, 2.1314987384379913, -0.2970066932721126, 0.11024345749117465, -0.35665253881047576, 0.33439636996128247, 1.2329053764066829, -2.274352527467673, 1.0352823684202461, -1.6947089036916057, 1.103404122716895, 0.2680998682373819, 1.1921699154864633, -1.6479644422764335, -1.0037168073470715, 0.23689954421929402, -1.6583679612696174, -0.9134190081186596, -1.8165141489840575, 2.383356881699066, -0.21714740785567585, 2.051455364744486, -1.1193423136088358, -2.0030328190504236, 0.34610521463613536, -0.7135087488859766, 1.4294438373746832, 0.26528459207881466, -0.6522443577754407, -1.8970878684327672, 1.5127033636541356, -1.1372695155316312, -2.123771177704304, 3.7685767934644634, -0.962456444178547, 0.33483521885782574, 0.06221996643451335, -0.2643077576686079, -1.0678300314840952, -0.11168848521830882, 1.469898210914281, -0.15196155336027894, -0.24187149632234684, -0.7273232072954252, -0.06382618620859454, 0.17374438435942727, -1.2002054245730605, 0.9201755613720116, -0.46857146260361615, 0.4830152434094948, 0.727302115013377, 0.2596202029962386, -0.7372079725553645, 0.02934779824099634, -0.1624261801903788, -1.234667364379531, 2.3934316430531615, -1.2218940247245864, 0.12725973822192474, 0.28772358006724563, 0.31861530491655826, 0.5542158026437715, -0.328919767310004, -0.9682657527828934, -0.7376247695931344, 0.8187704274296101, -0.7538155848827668, -0.3390753792116, -0.0025689408459969466]
    
    
    V4
    Iterations: 500
    LR: 1.1
    Accuracy =0.8452012383900929
    cost = 0.4127007311958369
    theta = [-0.1708089986174412, -1.0921188787472011, 0.48987345226564977, -0.7845167887081451, 0.67572749353328, 0.28531852267119573, 0.4230962426004968, 1.0317809208641127, -0.06358977364914509, 0.3540486036324086, 0.5305803543850979, -0.5508384749038356, -0.17414916640430195, 0.4254963552435394, 0.29827579957931716, -0.01894025182011712, 0.3530579728341034, 0.1532409197300106, -0.41152622963761926, -0.04386423050035526, -0.2457233402831524, -0.4640397823120967, -0.2557460942171131, 0.36154557748898936, 0.37250392488558015, -1.010578076188965, -0.5514979666862762, -0.9817630347358749, -0.46308240950786095, 0.25203789981467356, 0.4015607783537995, -1.144088245887653, 0.18210399453616805, 0.5688920021005117, 1.1708361038391584, 0.6883499526419367, 0.020618511891373474, 0.33452037130412704, -0.09206732376128905, 0.4872700808710268, 0.16650860025646183, -0.1880079320344075, 0.3089428405337235, 0.0725996384808596, -0.9504980273472045, 0.6251735241711636, -0.1925452338519618, 0.5086632095660399, 0.7739404052034579, -0.1984475893756646, 1.1810149161091756, 0.6627287033366467, 0.03413943965917109, 0.4308785941342007, 0.3504557830851429, -0.060480255450184726, -0.173501845142794, 0.669813951933241, 0.4842739958008717, -0.5427175392234571, 0.574289689634272, -0.9149787102228638, 0.09125415172481287, 0.549376114223544, -0.10555755847307852, 0.746803983203463, 0.585943804483655, 0.08435639241386006, -0.061343485731415265, -0.3146315388749397, -0.34951636032818084, -0.23292216845305536, -0.009644982448398766, -0.6652544946873932, -0.4708684013342332, 0.2612601944483233, 0.2282942960651716, -0.9085107468947927, 0.6414133727843349, -0.08758353100365936, 0.6451432661790483, -0.3648624461997169, -0.38621498730051246, 0.5738250132979905, 0.22251209832310304, -0.20198020572849207, -0.13444644921979412, 1.2647934481793426, -0.15951750378472992, -0.6185063048053849, 0.18095151989382105, 0.14511479323113466, -0.07008192494247217, -0.04405069348364264, 0.7330780481019017, 0.2090465286282711, -0.08888822931386431, 0.17721047860604722, 0.4079463380116408, 0.2908765779245773, 0.3447328692312925, 0.7839015981719333, 0.7911120062345565, 0.14693231086042913, -0.37962009914374695, 0.5010478025620388, -0.46732079492966583, 0.8950812694315244, -0.05494159119298272, 0.8751289969776092, 0.311870861712381, 0.1637198956455765, -0.7595052788177619, 0.41864522908561447, -0.44529502656545633, 0.2888168536726607, -0.268187529964984, -0.8729555140280227, 0.09071665611169505, -1.0718579539046116, -0.9627269909522962, 0.46789234437320104, -0.8311084971954886, -0.6976313128173702, 0.419330295635103, -0.2753831696980104, 0.07324273233366842, -0.04812146511530924, 0.21987332011500732, -0.27691849879086317, -0.4154244921358027, 0.6237074258834039, 0.04379185152416032, 1.114744266421435, -0.45685255083721915, -0.2249799629850052, -0.39169678114292894, 0.35883817225950304, 0.1546529167000828, 0.1064961194631897, 0.8172180767861482, 0.4919116303862479, 0.7325507919923725, -1.1327649180578083, -0.13519770149609156, -0.7770976116908829, 0.7409618974755803, 1.2963639369807345, -0.17339700854088733, 0.5540374713627049, -0.2867796548114878, 0.04335256277518746, 0.4840809618751207, 0.7691385049559609, -0.8914519880301789, 0.8832868187654376, 0.7464505878135335, -1.754208953767136, 0.1919378222697822, -0.09610604916064536, 0.21230775470722962, 0.1023449080046904, 0.47755601622478183, 0.4197021892000219, -0.6505362280953692, 0.2035310061024609, -0.03046132007040692, 0.5394702103578928, 0.40895797683729396, -0.20476852341281962, 0.036803873197327384, -0.687039759653827, -0.19226306775444596, -0.2769711852328035, -0.10895410432899404, -0.3699226940486396, 0.33960647146791584, 0.4210881790655213, -0.6795841330405665, 0.3110469683530015, -0.9242771011351779, 0.4115774556870604, 0.09481440278532444, -0.14576073034079856, -0.5500074485998134, -0.007721786807965996, 0.502822591780271, 0.6004198835883765, 0.4120772047056203, -0.42335113702288923, 0.10258349262751518, 0.19043335603402345, 0.4282330043005408, 0.9066211852725086, -0.37700784910944973, 0.8900463142224923, -0.689616438221583, -0.14029896786891094, -0.27172609212993243, -0.8834262402146738, 0.15423601457128336, -0.5427715962428878, -0.5602479430256787, 0.42320045262716466, -0.11935579986884393, -0.6110083886533225, -0.16446453414327894, 0.04230597839237326, -0.30059577203281385, -0.304575602454386, 0.16768318644181512, 0.2771208134345161, 0.05472722917345814, 0.25948578569893216, 0.5438493134241242, -0.37797512286428786, -0.16435291219148904, 0.8867504172624586, 0.36556649443968264, 0.8851399260322926, 0.2922081928089414, -0.3390649521204732, -0.35192448759865336, 1.1747294719630155, -0.18118952499898225, -0.9560677718995707, -0.8841637794789553, -0.6285822342999283, -0.10608913929207248, -0.4518516182741775, 0.2496573255257088, -0.3696417891569145, -0.29011588593570653, -0.01768547245294667, -0.30529656706139596, 0.19007613645057767, 0.9792153108324817, -0.5243941484775879, 0.37819154845965963, -0.4233162595494183, -0.9377288811555503, -0.16826987604286467, -0.9961222883879539, -0.5558449975721911, 0.008462690954709017, -0.3115358649435769, -0.44444648908380696, 0.11849970602339276, -0.23173674267520497, -1.1256296511894492, -0.1335769699395869, 0.4521717864925721, -0.5898584295388, 0.9825869106046607, -0.29926627619982826, -0.20158008600932462, 0.05659243043333629, -0.7275123654305181, -0.6401067222439691, 0.11134328937903991, 0.0428544475632149, 0.13834992183371006, 0.7104625388221563, 0.1234252468636972, 0.06470166421152745, 0.6888813111412716, 0.5674231445318216, -0.052068972207903096, 0.1123550617495485, 0.39066363033958146, -0.444773937295358, 0.24988856438131093, -0.7116051022686415, 0.3392743355548358, 0.4296487427382655, -0.7875059070425596, -0.06543178435988838, 0.3037290788324583, -0.3393978372304508, -0.9251771540441183, 0.23476672176178015, 0.5619065354663453, -0.6801328708391942, 0.230505968661408, 0.23166414632966514, -0.09318113587556622, -0.5500665479894512, -0.22580750950694545, 0.19350428256248425, -0.109268293934366, -0.583933757120375, -0.1994063469905106, -0.9082301652747092, -0.566022177989911, -0.9161050898199878, 0.0034746210771561294, 0.43873345225578503, -0.386256465773255, 0.5166333445564798, -0.6089131875324236, -0.11967949593933092, -1.0503380388243635, 0.010597339424260364, -0.2819691121506616, 0.7592972116491838, -0.4482388575541181, 0.12172675675808493, -0.06589020357207467, 0.022918342783047378, 0.9808490501702338, 0.4385197281101559, 0.921127616112396, 0.9954868591839928, -0.054318362273801546, 0.9579342791424172, 0.6444526284404121, -0.10339324195738936, 0.34269450427709497, -0.5003975406986254, -0.14859503436246366, -0.3367728482617276, 0.45709198770998455, 0.37313487023890796, -0.1579361285990912, -0.13703593755593174, -0.8599391352790003, 0.08507819464534573, 0.2634696571736701, 0.39442764368348043, -0.4467995940889503, -0.16376620902840458, -0.28181667993931214, -0.8898472345766698, -0.5458003606155569, -0.7583178469690225, 0.8919874886780466, 0.18416395499747407, 0.6950464286373385, -0.9654822226781008, -1.3152360465117108, 0.16078781447983462, -0.6676270005539816, 0.1622968304557922, -0.04853876635761062, -0.5713276024532725, -0.7184165273646667, 0.8398326047629767, -0.6367035508565444, -0.731029370953176, 1.899559311140495, -0.29677587187445637, 0.0821004321740643, -0.4676706877491432, 0.14511277859737395, -0.6909260738835696, -0.39437714918125083, 0.5349287192400194, -0.00033247915051297697, 0.2653727001162266, -0.2641584777045014, -0.19539366749647136, 0.20014503760318406, -0.2841678344468643, 0.8816076630080824, 0.13501437149741422, 0.16575460619617444, 0.1499704919509763, 0.28290911928728313, 0.042938655162441663, -0.08088144970476065, 0.14996176964743554, -0.44969037730169, 1.220194158713847, -0.3285263340435267, 0.25357275763811915, -0.30354681282317647, 0.4393822377534911, -0.008320901105722719, -0.36898357459141845, -0.444596677232833, -0.2393377026670115, 0.28902513405262814, -0.5077401081205175, 0.048289894742983855, -0.010483654586838809]
    
    
    
    
    '''
    theta = [0.47890034532457365, -2.7046581918999926, 1.82518262369292, -1.168262363567686, 1.5655699585475944, -0.6933607425259041, 0.7939623413435288, 1.4233813260677575, -0.08988702941879986, 0.8545100623191307, -0.30019989200859953, -1.9062238512284164, 0.4359263118510868, 0.9121594089584439, 0.45487222996948906, -0.4156496065961445, 0.5030248447915745, 0.2975619427457812, -1.1578933855704732, 0.5394043305132048, -0.3784091204427164, -0.4224036531131926, -0.22258362632054135, 1.1931962589330416, 0.23942660294773604, -0.8968619534839789, -1.4142933431300033, -1.661953564148633, -1.4526509145322066, 1.0883045050368934, 0.2885879919960301, -2.352677613690816, 0.43964829738708544, 0.9330703288721756, 1.909831756446659, 1.392800179424641, 1.1624714472380158, 0.37029291592851277, -0.3267236903004829, 0.830841148754363, 0.8482505205725182, -0.20671833722870445, 1.3726256129760892, -0.3317044421750065, -1.3105463246508158, 0.6947743574059602, -0.5694400785085952, 1.1433961681563163, 2.3576746911338593, 0.062092393510436564, 1.5844752509697722, 0.3919133586581019, -0.1699147790319137, 0.6506829303557222, 0.018345610050947425, -0.3761319495890433, -0.3217145691938608, 1.800450675369802, 0.32065878995611113, -0.6826436703818599, 0.9589112002417752, -2.120986708402246, 0.6531731247936919, 0.6046218698344883, -0.15336753663005398, 0.9359264811074978, 1.1052740563319463, 0.43374309190212584, 0.40817115369557233, -0.8304007808462172, -1.46105703079823, 0.16362037012416145, -0.36036208411394016, -1.461444937140983, -1.4036486292517547, 0.6834293662539771, -0.5731763246208735, -0.8994991150316368, 0.22251582423810812, 0.29047542206792604, 1.1729958906638098, -0.5182741358123858, -0.6933953369674749, 1.942144200096966, 0.4805924128681666, -0.3995917889978795, -0.19746442886402607, 1.7427117613881793, -0.6987530419708549, -0.23188797691544494, 0.1897761455186429, 0.40752445695768313, -0.443122521226026, 0.32005350129366844, 2.5643791788287484, 1.0621261789869776, -0.02957348071623284, 0.2949465366136897, 0.7612111739142744, 0.00791902075873841, 0.29414558056351875, 1.8072407917529412, 1.228083977094744, -0.020655167704308044, -0.1403685924453047, 0.6800942865662541, -0.9251178503232577, 1.1801947734545872, 0.241678846139745, 2.0251688659033764, 0.261282297112151, -0.6132617168284464, -2.063896344900456, 2.064013380927511, -1.2524799022680693, 1.6426881625192367, 0.5122823709646928, -2.209421545195469, 0.0021216174697608822, -2.3122268503111423, -2.038604076014684, 1.1681196123695174, -1.3468428489182358, -1.3585436954718297, 1.6443978802273822, -2.301596938226698, 0.14597284417991133, -0.29862470327365354, 0.5568461484622917, -0.26022265477019885, -1.4837943037985288, 2.5965502331249546, -0.8195887433051324, 1.604875115664083, -0.8548232457138195, -0.5755466433775626, -1.4253461546782469, 1.9001351850190178, 1.1227585046682886, -0.4015029268897052, 1.7121032802023064, 0.9947437495450984, 1.8536751474443858, -2.3378839226051182, -0.11055552915066498, -1.9201145079287354, 1.2079456128402772, 2.054309763692186, -0.12939306671574538, 0.8451864663105176, -1.5244701571667136, -0.20234688102755702, 0.5375207953801038, 1.909989033261806, -1.621916693701277, 1.2599263244860706, 1.9359466642743124, -3.7427476085922344, 0.8057991953973579, -0.23881042040963396, 0.05425957307668906, 0.2797450080207329, 1.0626999267834227, 0.05015521118140882, -1.3104832411068748, 0.2872722545866599, 0.13482196669840968, 0.8618800259676962, 0.2729693973967175, -0.12025352651749195, 0.9433806582368156, -0.6927502996900825, 0.4466699190438796, -0.5330378229011573, -0.6535830346049343, -0.06938187617429789, 0.6232247192552623, 0.08633683540055224, 0.017976518384606403, 1.1645197423734899, -2.4293354414557715, 1.300873509184219, -0.336238215783643, -0.21772640973778076, -0.5910378505174916, -0.3882872102805277, 0.37484543104408363, 1.0861278704027824, 0.5760358985954217, -0.7710236347715518, 0.4112961848038691, 0.4069902889490662, -0.5320329352646767, 3.0042954005709555, -1.657467903016368, 1.1082648438554599, -1.4054736973539514, 0.7847244196487798, -0.5407506657167692, -1.3885737129966944, 0.1876889861051462, -1.031755635844814, 0.20929080907158454, 1.9622874761662386, -0.8296463516055677, -0.8405905786098755, -0.5176262248566633, 0.38840328311461475, -0.6850928643630841, -0.015270820902402924, 0.8170972677225667, -0.7460390977138263, 0.18316407610440014, 0.1867810807789435, 0.1537375567274438, -1.0076978883524093, -0.49113640253878205, 0.5160062255760496, 1.4044351584174428, 1.6439788742785537, 1.4914938704248353, -1.3359054723175068, -0.3119281673366981, 2.70904480938574, -0.5093538134090704, -0.9355779128510391, -1.9854019069157625, -1.4847156248484885, -0.9735353187313844, -0.485435416764754, 0.4001189357375711, -0.7561666064896299, -0.591198659099981, -0.10433173082599331, -1.3928733595176943, 0.5273542495925048, 1.086280121366391, -0.38713473681510907, 0.6026325295523663, -0.8648726803547054, -2.3138504614464956, -0.02636937038736954, -1.6957403421440556, -0.14676890811528495, 0.41849491337189, -0.42430895503296767, -0.16571769104321696, 0.467022401866003, 0.26561511281206346, -1.7617237958554215, -0.34602539553989387, 0.5371129657062034, -0.8682433932826579, 2.1068243391540995, -0.7114805954349733, -0.6151165816617503, 0.2119922630806947, -1.1587445341538443, -1.2376309185435128, -0.3673786417537331, -0.47204476715973664, 0.6028128894405435, 0.9513449553536328, -0.15900215521839514, 0.20499819718471698, 1.7369101058603384, 1.5251063225743544, -0.5426935728032164, 0.36221569522743047, 1.3362791614277896, -0.32915817813343345, -0.12901748088998288, -1.0949762007696688, 0.0933357843206202, 0.9393210856710678, -1.9402447249609818, -0.6886809661606415, 0.45041532382925975, 0.2134639661332103, -1.7110281346818197, 0.9108029108233797, 0.12451233594646857, -0.3239757162400374, -0.24788097993867625, 0.6611755321744159, -0.5694771819585915, -2.8080026793845545, -1.0054067888737708, 0.07869292915519421, -0.45705737766780724, -0.5543519655376564, -0.1642972032769097, -0.534533180867031, -1.8455648666422562, -1.3743917963026429, 0.0902825404394035, 0.3078273309879114, -0.6659771286315004, 0.9026612870302291, -1.1494884541633206, -0.410257943057999, -2.0605134307951163, -0.250239160953536, 0.4831243533656999, 1.7620631580277986, -1.708048716254989, 1.2613874238366705, -1.6140628651039535, -0.6652186762367313, 2.2543957443874105, 0.20770367251816474, 2.365833529792192, 2.0514082624491543, -1.1568549630142755, 1.2472734857195398, 1.2280979400407732, -1.7459005221937003, 2.1314987384379913, -0.2970066932721126, 0.11024345749117465, -0.35665253881047576, 0.33439636996128247, 1.2329053764066829, -2.274352527467673, 1.0352823684202461, -1.6947089036916057, 1.103404122716895, 0.2680998682373819, 1.1921699154864633, -1.6479644422764335, -1.0037168073470715, 0.23689954421929402, -1.6583679612696174, -0.9134190081186596, -1.8165141489840575, 2.383356881699066, -0.21714740785567585, 2.051455364744486, -1.1193423136088358, -2.0030328190504236, 0.34610521463613536, -0.7135087488859766, 1.4294438373746832, 0.26528459207881466, -0.6522443577754407, -1.8970878684327672, 1.5127033636541356, -1.1372695155316312, -2.123771177704304, 3.7685767934644634, -0.962456444178547, 0.33483521885782574, 0.06221996643451335, -0.2643077576686079, -1.0678300314840952, -0.11168848521830882, 1.469898210914281, -0.15196155336027894, -0.24187149632234684, -0.7273232072954252, -0.06382618620859454, 0.17374438435942727, -1.2002054245730605, 0.9201755613720116, -0.46857146260361615, 0.4830152434094948, 0.727302115013377, 0.2596202029962386, -0.7372079725553645, 0.02934779824099634, -0.1624261801903788, -1.234667364379531, 2.3934316430531615, -1.2218940247245864, 0.12725973822192474, 0.28772358006724563, 0.31861530491655826, 0.5542158026437715, -0.328919767310004, -0.9682657527828934, -0.7376247695931344, 0.8187704274296101, -0.7538155848827668, -0.3390753792116, -0.0025689408459969466]
    
    
    prevCost = 10

    #amount of iterations
    for i in range(T):
        
        #Shrink alpha if needed
        
        if(i==(T//1.25)):
            alpha = alpha*0.70
        
        
        
        
        currentH = []
        currentHrow = []
        
        #2d array
        #this will hold a list of list
        #tempThetaRow[i] will be a list of rows used to calculate
        #a hypothesis such that tempThetaRow[z] was used to calculate
        #currentH[z]
        tempThetaRow = []
        
        #create an array corresponding to the amount of rows.
        #randomize the list so the algorithm grabs games at
        #random instead of the same games in the same order.
        tempRand = []
        for j in range(rowNum):
            tempRand.append(j)
        r.shuffle(tempRand)
        
        
        #Rock this bitch
        #calculate hypothesis for each game capable of getting a hypothesis
        #record needed information from each hypothesis as well
        for j in range(rowNum):
            
            row = tempRand[j]
            #predY = master[0][row]
            predW = master[1][row]
            
            if predW>gameNum:
                currentHrow.append(row)
                temp = calc_hx(master,theta,row)
                currentH.append(temp[0])
                tempThetaRow.append(temp[1])
            
        #end for j
        
        
        #calculate cost
        costValues.append(cost(master,currentH,currentHrow))
        xcostValues.append(i)
        
        

        
        
        #the j here indicates which theta were on. The column/catetgory 
        #j will correlate to will be. We know which category it will be
        #by doing j%24, whatever the remainder is is the category number
        #this work for everything except the last theta, which is "b"
        
        for j in range(thetaLength):
            tempHold = 0
            categoryNum = j%xColNum
            tempRow = j//xColNum
            
            #iterate k for every hypothesis
            for k in range(len(currentH)):
                

                if(j!=thetaLength-1):
                    tempHold = tempHold + (currentH[k] - master[28][currentHrow[k]])*master[categoryNum+4][tempThetaRow[k][tempRow]] /len(currentH)
                else:
                    tempHold = tempHold + (currentH[k] - master[28][currentHrow[k]])/len(currentH)
            #end for k
            
            
            #update theta[j]
            theta[j] = theta[j]-alpha*tempHold
            
        #print(theta)
        #end for j
    #end for i
    
    plt.plot(xcostValues,costValues)
    
    
    currentHrow = []
    currentH = []
    correctCount=0
    totalCount = 0
    correct75 = 0
    total75=0
    
    
    
    #calculate accuracy of thetas
    for j in range(rowNum):
            
        predY = master[0][j]
        predW = master[1][j]
        #predT = master[2][j]
        
        if predW>gameNum and predY==2022:
            
            print(predW)
            print(master[2][j], master[28][j])
            print(master[3][j])
            
            currentHrow.append(j)
            temp = calc_hx(master,theta,j)
            tempH = temp[0]
            
            
            temp0 = calc_hx(master,theta,getRow(master,master[3][j],predW,predY))
            tempH0 = temp0[0]
            
            percent = tempH/(tempH+tempH0)
            print("Real Prediction:", percent)
            
            
            print(tempH)
            print()
            
            
            if(tempH>=0.9):
                total75 = total75+1
                if (1 == master[28][j]):
                    correct75 = correct75 + 1
            
            if(tempH>=0.52):
                totalCount = totalCount+1
                if(1 == master[28][j]):
                    correctCount = correctCount+1
            
            
            
        
    #end for j
    
    
    print("accuracy")
    print(correctCount/totalCount)
    print()
    
    print("90%+ accuracy")
    print(correct75/total75)
    print(correct75)
    print(total75)
    print()
    
    #grab the final cost Value from list costValue in the array
    print("Cost of Thetas")
    print(costValues[len(costValues)-1])
    print()
    
    '''
    
    
    for j in range(rowNum):
        #print(j)
        
        predY = master[0][j]
        predW = master[1][j]
        predT = master[2][j]
        predO = master[3][j]
        
        
        
        if predW>gameNum and predY==2022:
            teamAodds = calc_hxNew(master, theta, predW,predY,predT,predO)
            teamBodds = calc_hxNew(master, theta, predW,predY,predO,predT)
            teamApre = teamAodds / (teamAodds+teamBodds)
            
            print(predY)
            print(predW)
            print(predT, teamAodds)
            print(predO,teamBodds)
            print(teamApre)

            
            totalCount = totalCount+1
            if teamApre>=(0.9) and master[28][j]==0:
                correctCount = correctCount+1
            #end if
            
            print()
        #end if
            
            
    #end for j
    
    
    
    #print("The algorithm predicts 2022 with an accuracy of",correctCount/totalCount)           
    
            
    print(correctCount)
    print(totalCount)
    print(correctCount/totalCount)
    '''
    
    
    return theta

def main():
    
    df = pd.read_excel("masterPost.xlsx")
    
    
    thetas = gradientDescent(df,0.0001,1)
    print("Thetas:")
    print(thetas)
    
    '''
    thetas = [0.4117424944203688, -0.8023545348858917, 0.24380131883340408, -1.014915743812513, 0.16591281489981108, 0.2566891843551199, 0.22528569734233206, 0.7275145809963682, -0.09110111610077119, 0.599855101996567, 0.7037057830439953, -0.25805507013921863, 0.09677639583883628, 0.3966864827955097, 0.005401777442914618, 0.2897230863963192, 0.42143635475736013, 0.16831744171814642, -0.05120537883983461, -0.20662708458281967, -0.0840623371974522, -0.42835980959974373, -0.42794957599521416, 0.2055348197216261, -0.11742931669147852, -0.6158863903465512, -0.30197948648864203, -0.8311686309987825, -0.13477475441145526, 0.05999401126171871, 0.6494941714106758, -0.7421057909651292, 0.12589472653915967, 0.7454685109765904, 0.949216032321226, 0.3227195971584968, 0.02312213908505429, 0.2707548265726855, -0.34428443791892493, 0.7152242070268607, -0.07265240990213313, 0.08119607906369355, 0.0015027949708116858, 0.12897220012345922, -0.48347746859616947, 0.3991741591004588, 0.12418575344076488, 0.303788497147474, 0.6011140815595143, 0.09926113813422184, 0.8448433433813932, 0.3797607106856956, 0.2329129485762905, -0.03773598623998112, 0.2124075962771895, -0.07808088485229457, 0.08399523930991899, 1.0314479088418922, -0.02781269574672457, -0.19291924367370192, 0.7773932749135595, -0.8203620032716856, 0.31056073141098217, 0.13128553587385966, 0.25647237285891505, 0.2095099269793793, 0.20700402652487712, 0.15636179168868913, 0.09955557117921064, -0.600340159909923, -0.28101866407121634, -0.3299964663599989, 0.0031355671652467253, -0.41720328233134163, -0.5676321596276938, 0.16330322706654052, 0.15936456119407483, -0.4543528159463318, 0.7303592996217212, 0.16887222143362307, 0.8476615128001197, 0.0008315822098042793, -0.6974248690053952, 0.09111698276763695, -0.03145436751085538, -0.204964049695354, 0.29949234809768166, 0.6652829655745113, -0.08802723383637881, -0.20621919781208906, 0.4127862385485169, -0.14446469132523818, 0.0697958961799733, -0.18120354701254693, 0.5301728653692938, 0.1759400191089988, -0.16316275388040324, 0.27416734941030985, 0.4104502631122824, 0.33851986980696674, 0.5083899178228252, 0.7344789979399402, 0.7972120422428426, 0.2494757321819668, 0.05073198971778894, 0.4046005613754887, 0.01365131598610389, 0.7574926342655047, 0.21425286787939085, 0.7009856257448893, 0.7057185370972976, -0.24700210332505357, -0.4456897743671015, 0.39423368080758686, -0.499773870368801, -0.01730038441571311, -0.2686218538020954, -0.5751266609219214, -0.011489903304999868, -0.7231939395407591, -0.8566071440699112, -0.1383346243918435, -0.8513644431385122, -0.8778436716112147, -0.030512850005566312, -0.20783472717995402, 0.2534558486057642, -0.4000895961641453, 0.27970899970223273, -0.46231082530362627, -0.708441945650417, 0.43700206914480694, 0.2691986241106279, 0.9252501413728343, -0.06104183981782797, -0.303369117168278, -0.2642603507835991, 0.22524311566063823, 0.3823545375620396, 0.18550577998424325, 0.8388059157742468, 0.49139625809922355, 0.9141033948133934, -0.8320683703531698, -0.4170053918749719, -0.14179688681097044, 0.6164317976010233, 0.9286530646213184, 0.47978744395827366, -0.03743523732353847, -0.45746223317614665, 0.11134581059757914, 0.718200530149998, 0.24004983194891538, -0.47938527899417543, 0.700466241856385, 0.7449434870163643, -1.5887199583414577, 0.3207627431521117, -0.32706416662582655, 0.02059065918831661, 0.2355859813202245, 0.9209888009800133, 0.2998906268444774, -0.14733179551572417, -0.16966517963613595, -0.0714422732232592, 0.21452243988709818, -0.39712411759672056, 0.07680852669734832, -0.01319045673876536, -0.2687162666007904, -0.11255847724676471, 0.26334526013951637, -0.32527865707781256, -0.0130770565766329, 0.23771112991030866, 0.20998484367237186, -0.2779486227152462, 0.22987095584980033, -0.4574418256339007, 0.16652271883583966, 0.1483209099935851, -0.1411033946853725, -0.3021700447600885, -0.2463357079940284, 0.3141573136382659, 0.859776205055607, 0.031169031871442595, -0.4287426680348755, 0.36158140944898665, -0.18035433956053223, 0.2804729682732508, 1.1536245214511427, -0.29923834500395646, 0.7331947867508446, -0.2901555445772982, -0.458902179879148, -0.3601618980039997, -0.9252379678488326, -0.22008272338379015, -0.33666050344213566, -0.907851444391395, 0.5628765660617512, -0.3643783057225861, -0.3628667467057539, -0.29732838091322966, 0.08059064739539419, -0.4279125174786336, -0.16032438732277965, 0.1732112536862101, 0.03997417766866685, 0.3692178569750804, 0.3470802640596173, 0.05104736699671884, -0.20300882050437777, -0.03723888327493436, 0.7587386342194692, 0.5283549942987581, 0.9480153829137963, 0.5856123988933095, -0.3227444360091094, -0.3784021187619881, 1.056780172379919, -0.17926159587401153, -0.20755175577792212, -1.0808148013247998, -0.3031300229238445, -0.35997258045366354, -0.29576989335172316, 0.0784145391814063, -0.4709881912401452, -0.1229910751682986, -0.057332516911379874, -0.24846539997007994, 0.0738586783053765, 0.5693848328703236, -0.4389944225725848, 0.03388177578486679, -0.315392385052975, -0.6945196943574548, -0.23283667162356675, -0.8183441681556849, -0.4753618288458282, -0.03300430977586454, -0.16043475415307967, 0.02055503706783368, -0.08431153454288186, 0.02641525821712562, -0.9867220547621421, -0.4148472343967361, -0.11600567932078779, -0.4889537940088724, 0.5067751008391074, 0.09618798655139285, -0.2743189750682062, -0.44075110977435644, -0.28893520531941463, -0.5611173496790487, 0.025707405424784665, -0.033486046249241404, 0.3473889780344756, 0.4636520443969396, 0.024214082666972364, 0.321560361795386, 0.3237659290465889, 0.6968937290342817, -0.20360155191602977, 0.042853706566390724, 0.28057187022727637, -0.6228925615198633, -0.1788019593180382, -0.685065371532047, 0.05331007999588972, 0.7340754886024659, -0.2524499112516652, -0.3080849445934078, 0.44950293488210885, -0.26117751996558153, -0.8168833404928371, 0.1905064500276385, 0.5205493241886501, -0.2603580612519955, -0.26396639641777847, 0.16676385221048856, 0.06644259830409141, -0.33929886559964617, -0.36752154587460834, -0.029974691408302202, -0.14607292528401822, -0.13526645815979085, -0.2905590278254474, -0.39406933631329955, -0.43937061187213206, -0.8571234717237395, -0.29297628275385024, 0.2018347271073435, -0.5809824969427034, 0.3516097023609726, -0.37929053042098326, -0.2696269448232643, -0.37158215065023964, -0.6498059929402351, -0.0596690318219907, 0.5104564176813724, -0.2388418494018332, 0.4848093499779665, -0.5946353517674462, -0.25950405376683794, 1.131202273893791, -0.019089844457951213, 0.9256471730328871, 0.945636952794195, -0.12274843700700099, 0.613410059824667, 0.7420376485187673, -0.1990620778837061, 0.07291408150391201, -0.143925188472999, -0.0787404467875039, -0.06609708482524439, 0.25180019603562537, 0.6491732130453601, -0.4187393821135842, 0.1120319001436807, -0.9302291750006348, 0.24262150784171607, -0.08713092572880535, 0.47216633153572973, -0.48439873015398616, 0.07969327318319348, -0.11375588068961791, -0.5287646463610021, -0.49444240750550866, -1.285790188650585, 1.0035111213020873, 0.1321404518911917, 0.6273078545708439, -0.448448382473145, -0.9788391746771272, 0.41815919661724404, -0.07742360670402872, 0.3722557963522156, -0.12807871842506124, -0.34820675482370606, 0.0702783362687407, 0.23263673565554868, -0.8458908950118416, -0.7075459116100244, 1.5641735791527578, -0.20895592266593052, 0.04667881999800416, -0.3488806208181528, -0.024400857272013826, -0.5927588765069005, -0.41769937231410914, 0.1954592186951848, -0.03382087762500634, 0.06591708783293854, -0.3366805351176126, 0.06437851007409416, 0.29629427848103745, 0.17068881077494918, 0.44881696063656473, 0.19195331726390727, 0.24822899996686082, 0.15440786737884232, 0.011752649607526677, 0.014296695817229798, 0.16133421628661707, 0.14761107262116926, -0.09791456310674045, 0.6151751621561788, -0.4128307245338067, 0.12029881979791279, -0.15632399699163194, 0.6612836922787753, -0.18147431773620704, -0.4757935360391984, -0.68331134106709, -0.062232574619107264, 0.263693333535022, -0.16569040093928922, 0.10389344921203293, -0.005952556001296896]
    
    teamA = "IND"
    teamB = "DAL"
    week = 13
    year = 2022
    #print("team A odds vs team B")
    teamAodds = calc_hxNew(df, thetas, week, year, teamA, teamB)
    teamBodds = calc_hxNew(df, thetas, week, year, teamB, teamA)
    
    print("For week", week, "in season", year)
    print(teamA, "percent chance to win aginst", teamB )
    print(teamAodds/ (teamAodds+teamBodds))
    print(teamAodds)
    '''
    
    
    '''
    
    
    
    #Test Team accuracy for a season
    rowNum = len(df[28])
    teamT = "NYG"
    yearT = 2022
    
    teamGames = 0
    correctPred = 0
   
    
    for i in range(rowNum):
        predY = df[0][i]
        predW = df[1][i]
        predT = df[2][i]
        
    
        if predW>gameNum and predY==yearT and predT==teamT:
            
            teamGames = teamGames+1
            temp = calc_hxNew(df, thetas, predW, predY, teamT, df[3][i])
            temp0 = calc_hxNew(df, thetas, predW, predY, df[3][i], teamT)
            
            temp1 = temp/ (temp+temp0)
            
            if  temp1>=0.5 and df[28][i]==1:
                correctPred = correctPred + 1
            if temp1 <0.5 and df[28][i]==0:
                correctPred = correctPred+1
    #end for i
    
    print("2022 accuracy for", teamT)
    print(correctPred)
    print(teamGames)
    
    


    '''
    
    return



cls = lambda: print("\033[2J\033[;H", end='')
#cls()
main()

































